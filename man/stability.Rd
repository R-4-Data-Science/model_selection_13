% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stability.R
\name{stability}
\alias{stability}
\title{Resampling-based stability for multi-path forward selection}
\usage{
stability(
  x,
  y,
  B = 50,
  resample = c("bootstrap", "subsample"),
  family = c("gaussian", "binomial"),
  K = min(ncol(x), 10),
  eps = 1e-06,
  delta = 1,
  L = 50,
  m = NULL,
  seed = 28
)
}
\arguments{
\item{x}{Matrix or data.frame of predictors (n x p).}

\item{y}{Response vector of length n.}

\item{B}{Integer, number of resamples (e.g., 50 or 100).}

\item{resample}{Resampling type: \code{"bootstrap"} or \code{"subsample"}.}

\item{family}{Model family passed to \code{build_paths}: \code{"gaussian"} or \code{"binomial"}.}

\item{K}{Maximum number of forward steps for \code{build_paths}.}

\item{eps}{Minimum AIC improvement for \code{build_paths}.}

\item{delta}{AIC tolerance for keeping near-tie children in \code{build_paths}.}

\item{L}{Maximum number of models per level in \code{build_paths}.}

\item{m}{Subsample size used when \code{resample = "subsample"}.
If \code{NULL}, defaults to \code{ceiling(sqrt(n))}.}

\item{seed}{Optional integer random seed for reproducibility. If \code{NULL},
the current RNG state is used.}
}
\value{
A list of class \code{"path_stability"} with components:
  \item{pi}{Numeric vector of length p with stability scores \eqn{\pi_j} in [0, 1].}
  \item{z}{B x p matrix of per-resample proportions \eqn{z_j^{(b)}}.}
  \item{meta}{List with resampling and model-selection parameters.}
}
\description{
For each resample of the data (bootstrap or subsample), run \code{build_paths()}
and compute, for each predictor, the proportion of models in that resample
that contain the predictor. Average these proportions across resamples to
obtain a stability score \eqn{\pi_j} for each predictor \eqn{j}.
}
\details{
For each resample \eqn{b = 1, \dots, B}:
\enumerate{
  \item Draw a bootstrap sample or subsample of the rows of \code{x, y}.
  \item Run \code{build_paths()} on the resampled data.
  \item Collect all models from the resulting forest (excluding the empty model at step 0).
  \item For each predictor \eqn{j}, compute \eqn{z_j^{(b)}} as the proportion of those models
        in which predictor \eqn{j} appears.
}
Finally, the stability scores are
\deqn{\pi_j = \frac{1}{B} \sum_{b=1}^B z_j^{(b)}.}
}
