% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plausible_models.R
\name{plausible_models}
\alias{plausible_models}
\title{Plausible model selection using AIC and stability}
\usage{
plausible_models(forest, pi, Delta = 2, tau = 0.6, jaccard_threshold = NULL)
}
\arguments{
\item{forest}{Object returned by \code{build_paths()} (class \code{"path_forest"}).}

\item{pi}{Numeric vector of stability scores \eqn{\pi_j} for each predictor.
Should either be named by predictor names, or have length equal to
\code{ncol(x)} used in \code{build_paths()} and correspond to the same order.}

\item{Delta}{Numeric, AIC tolerance for plausibility:
keep models with AIC \eqn{\le AIC_{\min} + \Delta}.}

\item{tau}{Numeric in [0, 1], threshold on average stability:
keep models whose mean stability \eqn{\pi(S)} is at least \code{tau}.}

\item{jaccard_threshold}{Optional numeric in (0, 1). If not \code{NULL},
models whose Jaccard similarity with an already-kept model exceeds this
threshold are dropped as near-duplicates.}

\item{x}{Optional predictor data used to refit models when \code{return_fits = TRUE}.
Only required if \code{return_fits = TRUE}.}

\item{y}{Optional response vector used to refit models when \code{return_fits = TRUE}.
Only required if \code{return_fits = TRUE}.}

\item{family}{Model family to use when refitting: \code{"gaussian"} or \code{"binomial"}.
Ignored if \code{return_fits = FALSE}.}

\item{return_fits}{Logical; if \code{TRUE}, refit each plausible model and
include a list-column \code{fit} containing the fitted objects. Default is \code{FALSE}.}
}
\value{
A data.frame (with class \code{"plausible_models"}) containing one row
  per plausible model, with at least the columns:
  \itemize{
    \item \code{key}: model key (sorted variable names concatenated).
    \item \code{step}: forward-selection step at which the model appears.
    \item \code{size}: number of predictors in the model.
    \item \code{aic}: AIC of the model (from \code{build_paths()}).
    \item \code{mean_stability}: average stability score \eqn{\pi(S)}.
    \item \code{vars}: list-column of character vectors with predictor names.
  }
  If \code{return_fits = TRUE}, a list-column \code{fit} is added.
}
\description{
Given a multi-path forest from \code{build_paths()} and a stability vector
\eqn{\pi} from \code{stability()}, this function selects a small set of
"plausible" models that are both:
\enumerate{
  \item close to the best model in terms of AIC (within a tolerance \code{Delta}),
  \item built from predictors that are, on average, sufficiently stable
        (mean stability at least \code{tau}).
}
Optionally, highly similar models (by Jaccard overlap) can be removed, and
fitted model objects can be returned for prediction.
}
\examples{
\dontrun{
  set.seed(1)
  n <- 120; p <- 6
  X <- matrix(rnorm(n * p), n, p)
  colnames(X) <- paste0("x", 1:p)
  y <- X[,1] * 2 - X[,2] + rnorm(n)

  forest <- build_paths(
    x = X, y = y, family = "gaussian",
    K = min(ncol(X), 5), eps = 1e-6, delta = 1, L = 25
  )
  stab <- stability(
    x = X, y = y, B = 30, resample = "bootstrap",
    family = "gaussian", K = 5, eps = 1e-6, delta = 1, L = 25
  )

  plaus <- plausible_models(
    forest, pi = stab$pi,
    Delta = 2, tau = 0.6
  )
  plaus
}

}
